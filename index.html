<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="style.css">
  <title>Valentine ðŸ’Œ</title>
  <style>
    :root{
      --shadow: 0 18px 40px rgba(0,0,0,.25);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; }

    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      display: grid;
      place-items: center;
      overflow: hidden;

      /* Background */
      background-image: url("heart-background.jpg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }

    /* Optional soft overlay so stuff is readable */
    body::before{
      content:"";
      position: fixed;
      inset: 0;
      background: rgba(255,255,255,0.06);
      pointer-events: none;
    }

    /* ===== Envelope screen ===== */
    #envelope-container{
      position: relative;
      z-index: 2;
      cursor: pointer;
      user-select: none;

      /* slightly bigger */
      transform: scale(1.10);
      transform-origin: center;
      transition: transform .18s ease;
      filter: drop-shadow(var(--shadow));
    }

    #envelope-container:hover{
      transform: scale(1.12);
    }

    #envelope-img{
      width: min(520px, 82vw);
      height: auto;
      display: block;
    }

    /* ===== Letter screen ===== */
    #letter-container{
      position: relative;
      z-index: 2;
      display: none; /* shown after click */
      align-items: center;
      justify-content: center;
      width: 100vw;
      height: 100vh;
      padding: 24px;
    }

    .letter-window{
      width: min(720px, 92vw);
      height: min(520px, 78vh);
      background: rgba(255,255,255,0.92);
      border-radius: 22px;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
      display: grid;
      grid-template-rows: auto 1fr auto;
      padding: 22px;
      transform: translateY(12px) scale(.98);
      opacity: 0;
      transition: transform .25s ease, opacity .25s ease;

    }

    .letter-window.open{
      transform: translateY(0) scale(1);
      opacity: 1;
    }

    #letter-title{
      text-align: center;
      font-size: clamp(22px, 3vw, 30px);
      margin: 0 0 10px;
      letter-spacing: .2px;
    }

    /* Espeon/Umbreon row */
    .eevee-row{
      position: relative;
      display: grid;
      place-items: center;
      margin-top: 8px;
    }

    .eevee-pair{
      display: flex;
      gap: 18px;
      align-items: flex-end;
      justify-content: center;
      padding: 10px 10px 0;
      width: 100%;
    }

    .eevee{
      width: min(160px, 28vw);
      height: auto;
      image-rendering: pixelated;
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.18));
      animation: bob 1.8s ease-in-out infinite;
    }

    .eevee.right{
      animation-delay: .22s;
    }

    @keyframes bob{
      0%, 100% { transform: translateY(0); }
      50%      { transform: translateY(-10px); }
    }

    /* Buttons area */
    #letter-buttons{
      position: relative;
      height: 110px;
      display: grid;
      place-items: center;
      margin-top: 10px;
    }

    .btn-wrap{
      position: relative;
      width: 100%;
      height: 100%;
    }

    .btn{
      position: absolute;
      bottom: 6px;
      width: 130px;
      height: auto;
      cursor: pointer;
      user-select: none;
      image-rendering: pixelated;
      transition: transform .12s ease;
      filter: drop-shadow(0 8px 10px rgba(0,0,0,.18));
    }

    /* Yes starts centered */
    .yes-btn{
      left: 50%;
      transform: translateX(-50%);
    }

    /* No starts slightly right */
    .no-btn{
      left: calc(50% + 160px);
      transform: translateX(-50%);
      will-change: transform;
    }

    /* Final screen */
    #final{
      display: none;
      place-items: center;
      text-align: center;
      gap: 12px;
      padding: 10px;
    }

    #final img{
      width: min(340px, 70vw);
      height: auto;
      image-rendering: pixelated;
      filter: drop-shadow(var(--shadow));
    }

    #final p{
      margin: 0;
      font-size: 18px;
      opacity: .9;
    }

    /* small note */
    .sub{
      text-align:center;
      margin: 0;
      opacity: .75;
      font-size: 14px;
    }
  </style>
</head>

<body>
  <!-- Envelope Screen -->
  <div id="envelope-container" title="Click to open ðŸ’Œ">
    <img id="envelope-img" src="envelope.png" alt="Envelope" draggable="false">
  </div>

  <!-- Letter Screen -->
  <div id="letter-container">
    <div class="letter-window" id="letter-window">
      <h1 id="letter-title">Will you be my Valentine?</h1>
      <p class="sub">pretty please ðŸ‘‰ðŸ‘ˆ</p>

      <div class="eevee-row">
        <div class="eevee-pair">
          <img class="eevee left" src="Espeon.png" alt="Espeon" draggable="false">
          <img class="eevee right" src="Umbreon.png" alt="Umbreon" draggable="false">
        </div>
      </div>
      
      <div class="valentine-text">
        Valentine Date: Go To A PokÃ©mon Show With Me?
      </div>

      <div id="letter-buttons">
        <div class="btn-wrap" id="btn-wrap">
          <img class="btn yes-btn" id="yesBtn" src="yes.png" alt="Yes" draggable="false">
          <img class="btn no-btn" id="noBtn" src="no.png" alt="No" draggable="false">
        </div>
      </div>

      <div id="final">
        <img src="hurray!.png" alt="Hurray!" draggable="false">
        <p>YAYYYY ðŸ’œðŸ’œðŸ’œ</p>
      </div>
    </div>
  </div>

  <script>
    // Elements
    const envelope = document.getElementById("envelope-container");
    const letter = document.getElementById("letter-container");
    const letterWindow = document.getElementById("letter-window");

    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");

    const buttonsArea = document.getElementById("letter-buttons");
    const finalArea = document.getElementById("final");

    // Open envelope -> show letter
    envelope.addEventListener("click", () => {
      envelope.style.display = "none";
      letter.style.display = "flex";

      // Reset "No" movement each open
      noBtn.dataset.t = "0,0";
      noBtn.style.transform = "translateX(-50%) translate(0px, 0px)";

      // Make sure Yes is centered on open
      yesBtn.style.left = "50%";
      yesBtn.style.transform = "translateX(-50%) scale(1)";

      setTimeout(() => letterWindow.classList.add("open"), 50);
    });

    // Keep "No" inside the letter window
    function moveNoButton() {
      const boundsEl = letterWindow; // constrain to the letter UI
      const bounds = boundsEl.getBoundingClientRect();
      const btn = noBtn.getBoundingClientRect();

      const padding = 12;

      // Allowed top-left range in viewport coords
      const minX = bounds.left + padding;
      const maxX = bounds.right - btn.width - padding;
      const minY = bounds.top + padding;
      const maxY = bounds.bottom - btn.height - padding;

      if (maxX <= minX || maxY <= minY) return;

      // Random target position (viewport coords)
      const x = Math.random() * (maxX - minX) + minX;
      const y = Math.random() * (maxY - minY) + minY;

      const current = noBtn.getBoundingClientRect();

      // translate deltas
      const dx = x - current.left;
      const dy = y - current.top;

      const prev = (noBtn.dataset.t || "0,0").split(",").map(Number);
      const nx = prev[0] + dx;
      const ny = prev[1] + dy;

      noBtn.dataset.t = `${nx},${ny}`;

      // Keep its base translateX(-50%) plus our random translate
      noBtn.style.transform = `translateX(-50%) translate(${nx}px, ${ny}px)`;
    }

    // Move on hover and click
    noBtn.addEventListener("mouseover", moveNoButton);
    noBtn.addEventListener("click", () => {
      moveNoButton();

      // Make Yes grow a bit faster each time No is clicked (fun)
      const m = (yesBtn.dataset.m ? Number(yesBtn.dataset.m) : 1);
      const next = Math.min(m + 0.12, 2.0);
      yesBtn.dataset.m = String(next);
      yesBtn.style.transform = `translateX(-50%) scale(${next})`;
    });

    // YES clicked -> final screen
    yesBtn.addEventListener("click", () => {
      buttonsArea.style.display = "none";
      finalArea.style.display = "grid";
    });

    // If window resizes, keep No safe (prevents weird offsets)
    window.addEventListener("resize", () => {
      noBtn.dataset.t = "0,0";
      noBtn.style.transform = "translateX(-50%) translate(0px, 0px)";
    });
  </script>
  <script src="script.js"></script>
</body>
</html>
